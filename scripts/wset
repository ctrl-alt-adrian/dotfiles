#!/usr/bin/env bash
#
# wset - wrapper for set-wallpapers.sh
#
# üìå Purpose:
#   A convenience wrapper around set-wallpapers.sh to quickly manage wallpapers.
#
# üîë Usage:
#   wset --rand [folder] [--depth N]   # random wallpapers (default: ~/Pictures/wallpapers)
#   wset --dp1 <file|--rand [folder] [--depth N]>
#   wset --dp2 <file|--rand [folder] [--depth N]>
#   wset <file1> <file2>               # set both monitors explicitly
#   wset                               # reload last saved
#   wset -h | --help                   # show this help
#
# ‚öôÔ∏è Options:
#   --rand [folder]    Random wallpapers
#   --depth N          Limit recursion depth (forwarded)
#   --dp1              Target DP-1
#   --dp2              Target DP-2

SCRIPT="$HOME/.config/hypr/set-wallpapers.sh"
DEFAULT_DIR="$HOME/Pictures/wallpapers"

show_help() {
  sed -n '2,35p' "$0" | sed 's/^# \{0,1\}//'
}

case "$1" in
  -h|--help)
    show_help
    exit 0
    ;;
  --rand|--random)
    shift
    if [[ "$1" == "--depth" ]]; then
      exec "$SCRIPT" --rand "$DEFAULT_DIR" "$@"
    else
      DIR="${1:-$DEFAULT_DIR}"
      shift || true
      exec "$SCRIPT" --rand "$DIR" "$@"
    fi
    ;;
  --dp1)
    shift
    exec "$SCRIPT" --dp1 "$@"
    ;;
  --dp2)
    shift
    exec "$SCRIPT" --dp2 "$@"
    ;;
  "")
    exec "$SCRIPT"
    ;;
  *)
    if [[ $# -eq 2 ]]; then
      exec "$SCRIPT" "$1" "$2"
    else
      show_help
      exit 1
    fi
    ;;
esac

